<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ChatGPT 翻譯與文法修正</title>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
    textarea { width: 100%; height: 150px; margin-top: 10px; }
    button { margin: 10px 5px 0 0; padding: 10px 15px; font-size: 16px; }
    #result { margin-top: 20px; background: white; padding: 10px; border: 1px solid #ccc; }
  </style>
</head>
<body>
  <h1>ChatGPT 翻譯 & 文法修正</h1>
  <label for="inputText">輸入文字：</label>
  <textarea id="inputText" placeholder="請輸入要翻譯或修正的文字..."></textarea>

  <div>
    <button onclick="translateText()">翻譯成英文</button>
    <button onclick="fixGrammar()">修正文法</button>
  </div>

  <div id="result"></div>

  <script>
    const apiKey = 'sk-UfAMSz3ElWnP_arouDL0VIIQCyVfd1x60uGY1r9zwkT3BlbkFJt7pETKaQOKBcrJS5mgUcMWEwVelKBMcD0S0pSGdNYA'; // ⚠️ 替換成你的 OpenAI API 金鑰

    async function callChatGPT(prompt) {
      try {
        const response = await axios.post('https://api.openai.com/v1/chat/completions', {
          model: 'gpt-4',
          messages: [
            { role: 'system', content: '你是一個語言助手，幫助使用者翻譯或修正文法。' },
            { role: 'user', content: prompt }
          ],
          temperature: 0.3
        }, {
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${apiKey}`
          }
        });
        
        const result = response.data.choices[0].message.content;
        document.getElementById('result').innerText = result;
      } catch (error) {
        console.error('錯誤:', error);
        document.getElementById('result').innerText = '⚠️ 發生錯誤，請檢查 API 金鑰或網路連線。';
      }
    }

    function translateText() {
      const input = document.getElementById('inputText').value;
      if (input.trim() === '') return alert('請輸入內容');
      const prompt = `請將以下中文翻譯成自然的英文：\n${input}`;
      callChatGPT(prompt);
    }

    function fixGrammar() {
      const input = document.getElementById('inputText').value;
      if (input.trim() === '') return alert('請輸入內容');
      const prompt = `請幫我修正下面這段英文的文法錯誤，並提供修正後的版本：\n${input}`;
      callChatGPT(prompt);
    }
  </script>
</body>
</html>
